/* Sleep Squad Friends ‚Äî Enhanced with Status & Navbar Integration */
* { margin: 0; padding: 0; box-sizing: border-box; }

:root{
    --page-x: 48px;
    --page-x-sm: 24px;
    --sidebar-w: 320px;
}


/* ===== Page & Background ===== */
body{
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    background: linear-gradient(145deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #1a1a2e 100%);
    color:#fff;
    height: auto;
    min-height:100dvh;
    line-height:1.6;
    position:relative;
    overflow-x:hidden;
    overflow-y:auto;
}
body::before{
    content:'';
    position:fixed; inset:0;
    background:
        radial-gradient(ellipse at 30% 70%, rgba(88,28,135,.08) 0%, transparent 60%),
        radial-gradient(ellipse at 70% 30%, rgba(30,58,138,.06) 0%, transparent 60%),
        radial-gradient(ellipse at 50% 90%, rgba(15,52,96,.04) 0%, transparent 50%);
    pointer-events:none; z-index:0;
}

#app{
    width:100%;
    height: 100dvh;
    min-height: 100dvh;
    background:rgba(26,26,46,.3);
    backdrop-filter: blur(10px);
    position:relative; z-index:1;
    display:flex; flex-direction:column;
    margin-left: var(--sidebar-w);
}

/* ===== Header ===== */
.header{
    background:rgba(26,26,46,.9);
    backdrop-filter: blur(20px);
    border-bottom:1px solid rgba(88,28,135,.15);
    padding:16px 0;
    position:sticky; 
    top: 0; 
    z-index:100; 
    flex-shrink:0;
    width: 100%;
}
.header-content{
    display:flex; justify-content:space-between; align-items:center;
    max-width:1400px; margin:0 auto; padding:0 var(--page-x);
}
.app-title{
    font-size:28px; font-weight:800; color:#fff; letter-spacing:-.5px;
    display:flex; align-items:center; gap:12px;
}
.app-title::after{ content:'üåô'; font-size:24px; opacity:.9; }
.header-actions{ display:flex; align-items:center; gap:24px; }

/* ===== Search & Invite ===== */
.search-container{ position:relative; width:350px; max-width:50vw; }
.search-input{
    width:100%; background:rgba(30,30,58,.8);
    border:1px solid rgba(88,28,135,.2);
    border-radius:20px; padding:14px 50px 14px 20px;
    color:#fff; font-size:15px; transition:.3s; backdrop-filter: blur(10px);
}
.search-input:focus{
    outline:none; border-color: rgba(88,28,135,.4);
    box-shadow:0 0 0 3px rgba(88,28,135,.1);
    background:rgba(30,30,58,.9);
}
.search-input::placeholder{ color: rgba(255,255,255,.5); }
.search-icon{ position:absolute; right:20px; top:50%; transform:translateY(-50%); font-size:20px; opacity:.7; }

.invite-btn{
    background: linear-gradient(135deg,#581c87 0%, #1e3a8a 100%);
    border:none; border-radius:20px; padding:14px 28px;
    color:#fff; font-weight:600; font-size:15px; cursor:pointer;
    transition:.3s; box-shadow:0 4px 15px rgba(88,28,135,.2);
    position:relative; overflow:hidden; white-space:nowrap;
}
.invite-btn::before{
    content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
    background:linear-gradient(90deg, transparent, rgba(255,255,255,.2), transparent);
    transition:left .5s;
}
.invite-btn:hover::before{ left:100%; }
.invite-btn:hover{ transform:translateY(-2px); box-shadow:0 8px 25px rgba(88,28,135,.3); }

.invite-btn-large {
    background: linear-gradient(135deg,#581c87 0%, #1e3a8a 100%);
    border:none; border-radius:20px; padding:18px 36px;
    color:#fff; font-weight:600; font-size:18px; cursor:pointer;
    transition:.3s; box-shadow:0 4px 15px rgba(88,28,135,.2);
    margin-top: 20px;
}

.invite-btn-large:hover{ transform:translateY(-2px); box-shadow:0 8px 25px rgba(88,28,135,.3); }

/* ===== Main Content ===== */
.main-content{
    padding:24px var(--page-x) 20px var(--page-x);
    max-width:1400px; margin:0 auto;
    flex:1 1 auto; display:block; width:100%; min-height:0;
    overflow-y: auto;
}

.today-section{ margin-bottom:24px; }

/* ===== Empty State ===== */
.empty-state {
    text-align: center;
    padding: 60px 20px;
}

.empty-icon {
    font-size: 80px;
    margin-bottom: 20px;
    opacity: 0.6;
}

.empty-state h3 {
    font-size: 24px;
    margin-bottom: 10px;
    color: rgba(255,255,255,.9);
}

.empty-state p {
    font-size: 16px;
    color: rgba(255,255,255,.7);
    margin-bottom: 20px;
}

/* ===== Podium (Minimal ‚Äúring + badge‚Äù style) ===== */
.podium-container {
    display: flex;
    align-items: flex-end;
    justify-content: flex-start;   /* move group to left */
    gap: 40px;                     /* keep nice spacing */
    margin-left: 240px;             /* fine-tune how far from left edge */
    margin-top: 24px;
    margin-bottom: 8px;
}

  
.podium-position{
/* no tall rounded blocks ‚Äî keep it airy like the reference */
background: transparent;
border-radius: 0;
padding: 0;
min-width:auto;
display:flex; flex-direction:column; align-items:center; position:relative;
cursor:pointer; transition:transform .25s ease, filter .25s ease;
}

.podium-position:hover{ transform: translateY(-4px); filter: brightness(1.03); }

/* Crown floats above the #1 like in the image */
.crown{
font-size:42px; position:absolute; top:-45px; left:50%; transform:translateX(-50%);
animation:float 3s ease-in-out infinite; filter: drop-shadow(0 4px 8px rgba(0,0,0,.28));
}
@keyframes float{0%,100%{transform:translate(-50%,0)} 50%{transform:translate(-50%,-6px)}}

/* Avatar with thick ring + soft inner glow and a subtle base shadow */
.podium-avatar{
width:120px; height:120px; border-radius:50%;
background-size:cover; background-position:center;
display:flex; align-items:center; justify-content:center;
font-weight:800; font-size:28px; color:#fff;
position:relative; overflow:hidden;
/* white micro-border + thick colored ring created via box-shadows */
border:3px solid #fff;
box-shadow:
    0 0 0 8px var(--ring, #8b5cf6),                /* colored ring */
    0 8px 18px rgba(0,0,0,.35);                    /* drop shadow */
}

/* soft inner vignette so images/initials feel integrated */
.podium-avatar::before{
content:"";
position:absolute; inset:0;
background: radial-gradient(ellipse at 40% 35%, rgba(255,255,255,.20), rgba(0,0,0,.35) 70%, rgba(0,0,0,.55) 100%);
pointer-events:none;
mix-blend-mode: soft-light;
}

/* rank badge pinned to the bottom center of the avatar */
.podium-avatar::after{
content: attr(data-rank); /* fallback; we override with position classes below */
position:absolute; left:50%; bottom:-8px; transform:translateX(-50%);
width:36px; height:36px; border-radius:50%;
background:#fff; color:#1f2937; font-weight:900; font-size:16px;
display:flex; align-items:center; justify-content:center;
box-shadow: 0 6px 14px rgba(0,0,0,.25);
border: 4px solid var(--ring, #8b5cf6);         /* same color as ring */
}

/* Little ground shadow ellipse (like the ref) */
.podium-position::after{
content:""; position:absolute; bottom:-12px; left:50%; transform:translateX(-50%);
width:90px; height:12px; border-radius:50%;
background: radial-gradient(closest-side, rgba(0,0,0,.35), transparent 70%);
filter: blur(2px);
}

/* Name + points styling */
.podium-name{ margin-top:18px; font-weight:800; font-size:18px; line-height:1; }
.podium-points{ margin-top:6px; font-size:13px; opacity:.9; display:flex; align-items:center; gap:6px; }
.podium-points .medal{ font-size:16px; }

/* Sizes by placement (slightly larger center) */
.podium-position.first  .podium-avatar{ width:112px; height:112px; }
.podium-position.second .podium-avatar,
.podium-position.third  .podium-avatar{ width:92px; height:92px; }

/* Accent colors per placement (ring + badge border) */
.podium-position.first  { --ring:#8b5cf6; } /* purple like the screenshot */
.podium-position.second { --ring:#60a5fa; } /* blue */
.podium-position.third  { --ring:#f59e0b; } /* amber */

/* Badge numbers without HTML changes */
.podium-position.first  .podium-avatar::after  { content:"1"; }
.podium-position.second .podium-avatar::after  { content:"2"; }
.podium-position.third  .podium-avatar::after  { content:"3"; }


/* ===== Status Indicator ===== */
.status-indicator {
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 2px solid white;
    font-size: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
    animation: pulse 2s infinite;
}

.status-indicator.online {
    background: #10b981;
    box-shadow: 0 0 10px rgba(16, 185, 129, 0.6);
}

.status-indicator.sleeping {
    background: #6366f1;
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.6);
}

.status-indicator.music {
    background: #f59e0b;
    box-shadow: 0 0 10px rgba(245, 158, 11, 0.6);
}

.status-indicator.gaming {
    background: #ef4444;
    box-shadow: 0 0 10px rgba(239, 68, 68, 0.6);
}

.status-indicator.offline {
    background: #6b7280;
    box-shadow: none;
    animation: none;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.1); opacity: 0.8; }
}

.podium-name{ font-size:14px; font-weight:800; color:#fff; margin-bottom:4px; text-align:center; text-shadow:0 2px 4px rgba(0,0,0,.3); }
.podium-streak{ font-size:12px; font-weight:600; color:rgba(255,255,255,.95); text-align:center; line-height:1.2; }
.streak-number{ display:block; font-size:16px; font-weight:900; margin-bottom:2px; }

/* ===== Leaderboard Cards ===== */
.leaderboard{
    display:flex; gap:20px; overflow-x:auto; overflow-y:visible;
    padding:10px 0 20px 0; scroll-behavior:smooth; -webkit-overflow-scrolling:touch; min-height:320px;
}
.leaderboard::-webkit-scrollbar{ height:6px; }
.leaderboard::-webkit-scrollbar-track{ background:rgba(88,28,135,.1); border-radius:3px; }
.leaderboard::-webkit-scrollbar-thumb{ background:rgba(88,28,135,.4); border-radius:3px; }
.leaderboard::-webkit-scrollbar-thumb:hover{ background:rgba(88,28,135,.6); }

.friend-card{
    background:rgba(30,30,58,.6); backdrop-filter: blur(15px);
    border:1px solid rgba(88,28,135,.15);
    border-radius:16px; padding:24px; transition:.3s; position:relative; overflow:hidden;
    cursor:pointer; min-width:280px; width:280px; flex-shrink:0; height:auto;
    display:flex; flex-direction:column;
}
.friend-card::before{
    content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
    background:linear-gradient(90deg, transparent, rgba(88,28,135,.1), transparent);
    transition:left .6s ease;
}
.friend-card:hover::before{ left:100%; }
.friend-card:hover{
    transform:translateY(-4px);
    box-shadow:0 15px 35px rgba(88,28,135,.15);
    border-color:rgba(88,28,135,.25); background:rgba(30,30,58,.8);
}
.friend-card.current-user{
    border-color:rgba(16,185,129,.4); background:rgba(30,30,58,.6);
}
.friend-card.current-user:hover{
    border-color:rgba(16,185,129,.6); box-shadow:0 15px 35px rgba(16,185,129,.2);
}

.friend-header{ display:flex; align-items:center; gap:16px; margin-bottom:20px; }
.avatar{
    width:60px; height:60px; border-radius:50%;
    background:linear-gradient(135deg,#8b5cf6,#06b6d4);
    display:flex; align-items:center; justify-content:center;
    font-weight:800; font-size:20px; color:#fff; flex-shrink:0;
    border:3px solid rgba(255,255,255,.2); position:relative; overflow:hidden; transition:.3s;
}

.friend-info{ flex:1; }
.friend-name{
    font-size:20px; font-weight:800; margin-bottom:4px;
    background:linear-gradient(135deg,#fff, rgba(255,255,255,.8));
    -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
}
.friend-rank{ font-size:16px; color:rgba(255,255,255,.7); font-weight:600; }
.rank-crown{ color:#fbbf24; margin-right:8px; font-size:18px; filter: drop-shadow(0 2px 4px rgba(0,0,0,.3)); }
.trend-indicator{ font-size:20px; margin-left:12px; filter: drop-shadow(0 2px 4px rgba(0,0,0,.3)); }
.trend-up{ color:#10b981; } .trend-down{ color:#ef4444; }

/* Status Text */
.status-text {
    font-size: 12px;
    color: rgba(255,255,255,.6);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 4px;
    margin-top: 2px;
}

.status-text .status-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    display: inline-block;
}

.status-text.online .status-dot { background: #10b981; }
.status-text.sleeping .status-dot { background: #6366f1; }
.status-text.music .status-dot { background: #f59e0b; }
.status-text.gaming .status-dot { background: #ef4444; }
.status-text.offline .status-dot { background: #6b7280; }

/* Stats */
.friend-stats{ display:flex; gap:30px; margin-bottom:20px; justify-content:center; }
.stat{ display:flex; flex-direction:column; align-items:center; gap:6px; }
.stat-value{
    font-size:26px; font-weight:900;
    background:linear-gradient(135deg,#8b5cf6,#06b6d4);
    -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
}
.stat-label{ font-size:12px; color:rgba(255,255,255,.8); text-transform:uppercase; letter-spacing:1px; font-weight:700; }

/* Badges */
.badges{ display:flex; gap:8px; margin-bottom:20px; flex-wrap:wrap; justify-content:center; }
.badge{
    background:rgba(139,92,246,.2); border:1px solid rgba(139,92,246,.4);
    border-radius:12px; padding:6px 12px; font-size:11px; font-weight:700;
    display:flex; align-items:center; gap:4px; backdrop-filter: blur(10px);
    transition:.3s; position:relative; overflow:hidden;
}
.badge:hover{ transform:scale(1.05); }
.badge.deep-sleeper{ background:linear-gradient(135deg, rgba(251,191,36,.3), rgba(245,158,11,.2)); border-color:#fbbf24; color:#fbbf24; box-shadow:0 6px 15px rgba(251,191,36,.2); }
.badge.on-fire{ background:linear-gradient(135deg, rgba(239,68,68,.3), rgba(220,38,38,.2)); border-color:#ef4444; color:#ef4444; box-shadow:0 6px 15px rgba(239,68,68,.2); }
.badge.balanced{ background:linear-gradient(135deg, rgba(6,182,212,.3), rgba(8,145,178,.2)); border-color:#06b6d4; color:#06b6d4; box-shadow:0 6px 15px rgba(6,182,212,.2); }

/* Actions */
.friend-actions{ display:flex; gap:12px; }
.action-btn{
    flex:1; padding:12px 18px; border-radius:12px; border:none; font-size:14px; font-weight:700;
    cursor:pointer; transition:.3s; backdrop-filter: blur(15px); position:relative; overflow:hidden;
}
.nudge-btn{ background:linear-gradient(135deg, rgba(139,92,246,.3), rgba(124,58,237,.2)); color:#8b5cf6; border:2px solid rgba(139,92,246,.4); }
.nudge-btn:hover{ background:linear-gradient(135deg, rgba(139,92,246,.5), rgba(124,58,237,.3)); transform:scale(1.05); box-shadow:0 8px 20px rgba(139,92,246,.2); }
/* ===== Modal ===== */
.modal-overlay{
    position:fixed; inset:0; backdrop-filter: blur(10px); transform: translateX(-200px);
    display:none; align-items:center; justify-content:center; z-index:1000;
}
.modal-overlay.show{ display:flex; }
.modal{
    background:rgba(30,27,75,.95); border-radius:24px; padding:40px;
    max-width:500px; width:90%; border:2px solid rgba(139,92,246,.3);
    backdrop-filter: blur(30px); position:relative;
}
.modal-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:30px; }
.modal-header h3{ font-size:24px; font-weight:800; color:#fff; }
.close-btn{ background:none; border:none; font-size:24px; color:rgba(255,255,255,.7); cursor:pointer; transition:.3s; }
.close-btn:hover{ color:#fff; transform:scale(1.1); }
.modal-content p{ font-size:18px; color:rgba(255,255,255,.8); margin-bottom:20px; }
.invite-code{ display:flex; gap:16px; margin-bottom:30px; }
.invite-code span{
    flex:1; background:rgba(139,92,246,.2); border:2px solid rgba(139,92,246,.4);
    border-radius:12px; padding:16px; font-size:20px; font-weight:800; color:#8b5cf6; text-align:center; font-family:monospace;
}
.copy-btn{
    background:linear-gradient(135deg,#8b5cf6,#06b6d4); border:none; border-radius:12px;
    padding:16px 24px; color:#fff; font-weight:700; cursor:pointer; transition:.3s;
}
.copy-btn:hover{ transform:scale(1.05); box-shadow:0 8px 20px rgba(139,92,246,.3); }
.share-btn{
    width:100%; background:linear-gradient(135deg,#10b981,#06b6d4); border:none; border-radius:16px;
    padding:18px; color:#fff; font-size:18px; font-weight:700; cursor:pointer; transition:.3s;
}
.share-btn:hover{ transform:translateY(-2px); box-shadow:0 12px 30px rgba(16,185,129,.3); }

.nudge-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    backdrop-filter: blur(5px);
    z-index: 2000;
    justify-content: center;
    align-items: center;
    transform: translateX(-200px);
}

.nudge-modal.show {
    display: flex;
    animation: modalFadeIn 0.3s ease;
}

.nudge-modal-content {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    padding: 40px;
    text-align: center;
    position: relative;
    color: white;
    max-width: 350px;
    width: 90%;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    animation: modalSlideUp 0.4s ease;
}

.nudge-animation {
    position: relative;
}

.nudge-emoji {
    font-size: 60px;
    margin-bottom: 20px;
    animation: nudgeBounce 0.6s ease infinite alternate;
}

.nudge-title {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 10px;
}

.nudge-subtitle {
    font-size: 16px;
    opacity: 0.9;
    line-height: 1.4;
}

.nudge-sparkles {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
}

.sparkle {
    position: absolute;
    font-size: 20px;
    animation: sparkleFloat 2s infinite ease-in-out;
}

.sparkle:nth-child(1) {
    top: 15%;
    left: 15%;
    animation-delay: 0s;
}

.sparkle:nth-child(2) {
    top: 20%;
    right: 20%;
    animation-delay: 0.5s;
}

.sparkle:nth-child(3) {
    bottom: 25%;
    left: 25%;
    animation-delay: 1s;
}

.sparkle:nth-child(4) {
    bottom: 20%;
    right: 25%;
    animation-delay: 1.5s;
}

@keyframes modalFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes modalSlideUp {
    from { 
        opacity: 0;
        transform: translateY(30px) scale(0.9);
    }
    to { 
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes nudgeBounce {
    0% { transform: translateY(0) rotate(-5deg); }
    100% { transform: translateY(-10px) rotate(5deg); }
}

@keyframes sparkleFloat {
    0%, 100% { 
        opacity: 0;
        transform: translateY(0) scale(0.5) rotate(0deg);
    }
    50% { 
        opacity: 1;
        transform: translateY(-20px) scale(1) rotate(180deg);
    }
}

/* ===== Utilities ===== */
.hidden{ display:none !important; }

/* Safe-area */
@supports(padding:max(0px)){
    .toast{ top:max(20px, env(safe-area-inset-top)); right:max(20px, env(safe-area-inset-right)); }
    .header-content{
        padding-right:max(var(--page-x), env(safe-area-inset-right));
        padding-left:max(var(--page-x), env(safe-area-inset-left));
    }
}

/* ===== Responsive ===== */
@media (max-width:1024px){ 
    .search-container{ max-width:320px; } 
    :root { --sidebar-w: 0px; }
    #app { margin-left: 0; }
    .sleep-sidebar { display: none; }
}

@media (max-width:768px){
    #app{ margin-left:0; }
    .header{ padding:14px 0; }
    .header-content{ padding:0 var(--page-x-sm); }
    .app-title{ font-size:24px; }
    .header-actions{ flex-direction:column; gap:12px; width:100%; align-items:stretch; }
    .search-container{ width:100%; max-width:none; }
    .main-content{ padding:20px var(--page-x-sm) 16px var(--page-x-sm); }
    .podium-container{ gap:16px; margin-bottom:16px; min-height:120px; }
    .podium-position{ min-width:100px; padding:16px 12px; }
    .podium-position.first{ height:120px; }
    .podium-position.second{ height:100px; }
    .podium-position.third{ height:80px; }
    .friend-card{ min-width:240px; padding:20px; }
    .friend-stats{ gap:20px; }
    .stat-value{ font-size:22px; }
    
    .sleep-sidebar { display: none; }
}

/* Scrollbar Styling */
.sleep-sidebar::-webkit-scrollbar {
    width: 6px;
}

.sleep-sidebar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
}

.sleep-sidebar::-webkit-scrollbar-thumb {
    background: rgba(96, 165, 250, 0.5);
    border-radius: 3px;
}

.sleep-sidebar::-webkit-scrollbar-thumb:hover {
    background: rgba(96, 165, 250, 0.7);
}

